  <!DOCTYPE html>
  <html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>WALL-E CAM Stream</title>

    <!-- Bootstrap -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/bootstrap-slider.min.css" rel="stylesheet">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->



    </head>


    <body>
      <div class="container">
        <div class="row">
          <div class="col-md-4 col-xs-6">
            <img src="static/media/WALLE_logo.jpeg" class="img-responsive">
          </div>
          <div class="col-xs-6">
            <h1>WALL-E Cam  <small>Microprocessor 2 Final Project</small></h1>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-8">
            <div class="embed-responsive embed-responsive-4by3">

                <embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org" version="VideoLAN.VLCPlugin.2" autoplay="yes" loop="yes" width="640" height="480" target="http://0.0.0.0:8080/" id="vlc"></embed>

            </div>
          </div>
          <div class="col-xs-4 text-center" >
           <H1><small>Control Panel for WALL-E:</small></H1>
         </div>
         <div class="col-xs-4 text-center" >
           <div class="checkbox">
            <label><input type="checkbox" value="" name="checkRemote" onclick="checkRemote(this)" >Allow Remote Control</label>
          </div>
        </div>
        <div class="col-xs-4 text-center">
          <input id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="-90" data-slider-max="90" data-slider-step="1" data-slider-value="0"/>
          <p>Pan</p>
        </div>
        <div class="col-xs-4 text-center">
          <input id="ex2" data-slider-id='ex1Slider' type="text" data-slider-min="-90" data-slider-max="90" data-slider-step="1" data-slider-value="0" />
          <p>Tilt</p>
        </div>
        <div class="col-xs-4 text-center" >
          <button type="button" class="btn btn-primary" onclick="Button_onclick('positionButton')">Update WALL-E Position</button>
          </div>
           <div class="col-xs-4 text-center" >
         <p>        </p>
       </div>
        <div class="col-xs-4 text-center" >
         <H1><small>Stream Functionality:</small></H1>
       </div>
       <div class="col-xs-2" >
        <button type="button" class="btn btn-primary"  onclick="Button_onclick('screenshotButton')">
          <span class="glyphicon glyphicon-camera"></span> Take Screenshot
        </button>
      </div>
      <div class="col-xs-2" >
        <button type="button" class="btn btn-primary" onclick="checkStream(this)">
          <span class="glyphicon glyphicon-facetime-video"></span> Stop Stream
        </button>
      </div>
    </div>
  </div>

  <div class="page-header">
        <h1>Taken Screenshots:</h1>
      </div>
      <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-example-generic" data-slide-to="1"></li>
          <li data-target="#carousel-example-generic" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
          <div class="item active">
            <img src="static/media/Moon1.jpg" alt="First slide">
          </div>
          <div class="item">
            <img src="static/media/Moon2.jpg" alt="Second slide">
          </div>
          <div class="item">
            <img src="static/media/Moon3.jpg" alt="Third slide">
          </div>
        </div>
        <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
</div>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="static/js/jquery-3.1.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="static/js/bootstrap.min.js"></script>
<!-- Include the Sliders for the Web Page -->
<script src="static/js/bootstrap-slider.min.js"></script>

<script>
	
	var panAngle;
	var tiltAngle;
	
	window.onload = function(){
		
		var embed = document.getElementById("vlc");
		var embedAudio = embed.audio;
		var embedParent = embed.parentNode;
		embedParent.removeChild(embed);
		embed.setAttribute("target", "http://"+window.location.hostname+":8080/");
		embed.src = "http://"+window.location.hostname+":8080/";
		embedParent.appendChild(embed);
		
	}
	
	
  $('#ex1').slider({
    formatter: function(value) {
		panAngle = value.toString();
      return 'Current value: ' + value;
    }
  });
  
  
  
  $('#ex2').slider({
    formatter: function(value) {
		
		tiltAngle = value.toString();
      return 'Current value: ' + value;
    }
  });
  
function Button_onclick(msg){
	
				 var msgString = msg.toString();
				 
				if(msgString == "positionButton"){
					$.ajax({ url: '/' + "positionButton "+ panAngle + " " + tiltAngle });
				}else if(msgString == "screenshotButton" ){
					$.ajax({ url: '/' + "screenshotButton" });
				}			
			}
function checkRemote(checkbox){
		if(checkbox.checked){
			
			$.ajax({ url: '/' + 'checkedRemote' });
			
			
		}else{
			$.ajax({ url: '/' + 'notCheckedRemote' });
		}
}

function checkStream(status){
	
		var vlc = document.getElementById("vlc");
		var vlcAudio = vlc.audio;
		var embedParent = vlc.parentNode;
		
		embedParent.removeChild(vlc);
		vlc.setAttribute("target", "http://"+window.location.hostname+":8080/");
		vlc.src = "http://"+window.location.hostname+":8080/";
		
		embedParent.style.display = 'none';
		embedParent.style.display = 'block';
		
		setTimeout(function() {
			embedParent.appendChild(vlc);
		}, 1);
		

	
	//if(status.checked){
		//$.ajax({ url: '/' + "stopStream" });
		//var doc = document.getElementById("playStream");
		//doc.value="False";
		
	//}
	//else{
		//$.ajax({ url: '/' + "startStream" });
		//var doc = document.getElementById("playStream");
		//doc.value="True";
	//}
}
  
  
  
  
  
</script>









</body>

</html>
